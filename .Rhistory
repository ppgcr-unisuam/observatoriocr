alluv.data.aggr$Ano <- as.numeric(as.factor(alluv.data.aggr$Ano))
alluv.data.aggr$AC <- as.numeric(as.factor(alluv.data.aggr$AC))
alluv.data.aggr$LP <- as.numeric(as.factor(alluv.data.aggr$LP))
alluv.data.aggr$PP <- as.numeric(as.factor(alluv.data.aggr$PP))
View(alluv.data.aggr)
# structure the alluvial plot
# projetos
sheet <- "Projetos"
source("Scripts/read_sucupira.R")
source("Scripts/read_sucupira.R")
alluv.data <-
data.frame(
sucupira.raw$`Área de Concentração`,
sucupira.raw$`Linha de Pesquisa`,
sucupira.raw$`Nome do Projeto de Pesquisa`
)
alluv.data <-
data.frame(
sucupira.raw$`Área de Concentração`,
sucupira.raw$`Linha de Pesquisa`,
sucupira.raw$`Nome do Projeto de Pesquisa`
)
alluv.data <- alluv.data[complete.cases(alluv.data),]
start <- sucupira.raw$`Data de Início da Linha de Pesquisa`
alluv.data.aggr <-
aggregate(
alluv.data,
by = list(
alluv.data$sucupira.raw..Área.de.Concentração.,
alluv.data$sucupira.raw..Linha.de.Pesquisa.,
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.
),
FUN = length
)
# drop repeated columns
alluv.data.aggr <- alluv.data.aggr[, 1:4]
colnames(alluv.data.aggr) <- c("AC", "LP", "PP", "Freq")
# reorder data
alluv.data.aggr <- alluv.data.aggr[order(start, decreasing = TRUE), ]
start
sucupira.raw$`Data de Início`
# structure the alluvial plot
# projetos
sheet <- "Projetos"
source("Scripts/read_sucupira.R")
source("Scripts/read_sucupira.R")
alluv.data <-
data.frame(
sucupira.raw$`Área de Concentração`,
sucupira.raw$`Linha de Pesquisa`,
sucupira.raw$`Nome do Projeto de Pesquisa`
)
alluv.data <- alluv.data[complete.cases(alluv.data),]
start <- sucupira.raw$`Data de Início`
alluv.data.aggr <-
aggregate(
alluv.data,
by = list(
alluv.data$sucupira.raw..Área.de.Concentração.,
alluv.data$sucupira.raw..Linha.de.Pesquisa.,
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.
),
FUN = length
)
# drop repeated columns
alluv.data.aggr <- alluv.data.aggr[, 1:4]
colnames(alluv.data.aggr) <- c("AC", "LP", "PP", "Freq")
# reorder data
alluv.data.aggr <- alluv.data.aggr[order(start, decreasing = TRUE), ]
# get all history of 'linha de pesquisa'
linhas <- na.exclude(unique(alluv.data$sucupira.raw..Linha.de.Pesquisa.))
# recoding
alluv.data.aggr$AC <- as.numeric(as.factor(alluv.data.aggr$AC))
alluv.data.aggr$LP <- as.numeric(as.factor(alluv.data.aggr$LP))
alluv.data.aggr$PP <- as.numeric(as.factor(alluv.data.aggr$PP))
# colors
alluv.colors <- c()
for(i in 1:length(alluv.data.aggr$LP)) {
alluv.colors <- c(alluv.colors,
brewer.pal(n = length(linhas), name = "Set3")[alluv.data.aggr$LP[i]])
}
# plot area setup
par(
oma = c(1, 1, 1, 1),
mar = c(1, 1, 1, 1),
bg = '#2C3E50',
col.lab = "white",
col.axis = NA,
fg = NA
)
# plot 1
alluvial(
alluv.data.aggr[, 1:3],
freq = alluv.data.aggr$Freq,
col = alluv.colors,
border = NA,
blocks = FALSE
)
options(knitr.kable.NA = '--', knitr.table.format = "html")
# structure the alluvial plot
# projetos
sheet <- "Projetos"
source("Scripts/read_sucupira.R")
source("Scripts/read_sucupira.R")
alluv.data <-
data.frame(
sucupira.raw$`Área de Concentração`,
sucupira.raw$`Linha de Pesquisa`,
sucupira.raw$`Nome do Projeto de Pesquisa`
)
alluv.data <- alluv.data[complete.cases(alluv.data),]
start <- sucupira.raw$`Data de Início`
alluv.data.aggr <-
aggregate(
alluv.data,
by = list(
alluv.data$sucupira.raw..Área.de.Concentração.,
alluv.data$sucupira.raw..Linha.de.Pesquisa.,
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.
),
FUN = length
)
# drop repeated columns
alluv.data.aggr <- alluv.data.aggr[, 1:4]
colnames(alluv.data.aggr) <- c("AC", "LP", "PP", "Freq")
# reorder data
alluv.data.aggr <- alluv.data.aggr[order(start, alluv.data$sucupira.raw..Linha.de.Pesquisa., decreasing = TRUE), ]
# reorder data
alluv.data.aggr <- alluv.data.aggr[order(start, decreasing = TRUE), ]
# reorder data
alluv.data.aggr <- alluv.data.aggr[order(start, decreasing = TRUE), ]
# get all history of 'linha de pesquisa'
linhas <- na.exclude(unique(alluv.data$sucupira.raw..Linha.de.Pesquisa.))
# recoding
alluv.data.aggr$AC <- as.numeric(as.factor(alluv.data.aggr$AC))
alluv.data.aggr$LP <- as.numeric(as.factor(alluv.data.aggr$LP))
alluv.data.aggr$PP <- as.numeric(as.factor(alluv.data.aggr$PP))
# colors
alluv.colors <- c()
for(i in 1:length(alluv.data.aggr$LP)) {
alluv.colors <- c(alluv.colors,
brewer.pal(n = length(linhas), name = "Set3")[alluv.data.aggr$LP[i]])
}
# plot area setup
par(
oma = c(1, 1, 1, 1),
mar = c(1, 1, 1, 1),
bg = '#2C3E50',
col.lab = "white",
col.axis = NA,
fg = NA
)
# plot 1
alluvial(
alluv.data.aggr[, 1:3],
freq = alluv.data.aggr$Freq,
col = alluv.colors,
border = NA,
blocks = FALSE
)
alluv.data.aggr[, 1:3]
start
length(start)
dim(alluv.data.aggr)
# structure the alluvial plot
# projetos
sheet <- "Projetos"
source("Scripts/read_sucupira.R")
source("Scripts/read_sucupira.R")
alluv.data <-
data.frame(
sucupira.raw$`Área de Concentração`,
sucupira.raw$`Linha de Pesquisa`,
sucupira.raw$`Nome do Projeto de Pesquisa`
)
alluv.data <-
data.frame(
sucupira.raw$`Área de Concentração`,
sucupira.raw$`Linha de Pesquisa`,
sucupira.raw$`Nome do Projeto de Pesquisa`
)
start <- sucupira.raw$`Data de Início`[complete.cases(alluv.data)]
alluv.data <- alluv.data[complete.cases(alluv.data),]
alluv.data.aggr <-
aggregate(
alluv.data,
by = list(
alluv.data$sucupira.raw..Área.de.Concentração.,
alluv.data$sucupira.raw..Linha.de.Pesquisa.,
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.
),
FUN = length
)
# drop repeated columns
alluv.data.aggr <- alluv.data.aggr[, 1:4]
colnames(alluv.data.aggr) <- c("AC", "LP", "PP", "Freq")
alluv.data.aggr
head(alluv.data.aggr)
# reorder data
alluv.data.aggr <- alluv.data.aggr[order(start, decreasing = TRUE), ]
# reorder data
# get all history of 'linha de pesquisa'
linhas <- na.exclude(unique(alluv.data$sucupira.raw..Linha.de.Pesquisa.))
# recoding
alluv.data.aggr$AC <- as.numeric(as.factor(alluv.data.aggr$AC))
alluv.data.aggr$LP <- as.numeric(as.factor(alluv.data.aggr$LP))
alluv.data.aggr$PP <- as.numeric(as.factor(alluv.data.aggr$PP))
# colors
alluv.colors <- c()
View(alluv.data.aggr)
# structure the alluvial plot
# projetos
sheet <- "Projetos"
source("Scripts/read_sucupira.R")
source("Scripts/read_sucupira.R")
alluv.data <-
data.frame(
sucupira.raw$`Área de Concentração`,
sucupira.raw$`Linha de Pesquisa`,
sucupira.raw$`Nome do Projeto de Pesquisa`
)
start <- sucupira.raw$`Data de Início`[complete.cases(alluv.data)]
alluv.data <- alluv.data[complete.cases(alluv.data),]
alluv.data.aggr <-
aggregate(
alluv.data,
by = list(
alluv.data$sucupira.raw..Área.de.Concentração.,
alluv.data$sucupira.raw..Linha.de.Pesquisa.,
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.
),
FUN = length
)
# drop repeated columns
alluv.data.aggr <- alluv.data.aggr[, 1:4]
colnames(alluv.data.aggr) <- c("AC", "LP", "PP", "Freq")
View(alluv.data)
order(start, decreasing = TRUE)
dim(alluv.data.aggr)
length(start)
options(knitr.kable.NA = '--', knitr.table.format = "html")
# structure the alluvial plot
# projetos
sheet <- "Projetos"
source("Scripts/read_sucupira.R")
source("Scripts/read_sucupira.R")
alluv.data <-
data.frame(
sucupira.raw$`Área de Concentração`,
sucupira.raw$`Linha de Pesquisa`,
sucupira.raw$`Nome do Projeto de Pesquisa`
)
alluv.data <-
data.frame(
sucupira.raw$`Área de Concentração`,
sucupira.raw$`Linha de Pesquisa`,
sucupira.raw$`Nome do Projeto de Pesquisa`
)
start <- sucupira.raw$`Data de Início`[complete.cases(alluv.data)]
alluv.data <- alluv.data[complete.cases(alluv.data),]
alluv.data.aggr <-
aggregate(
alluv.data,
by = list(
alluv.data$sucupira.raw..Área.de.Concentração.,
alluv.data$sucupira.raw..Linha.de.Pesquisa.,
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.
),
FUN = length
)
# drop repeated columns
alluv.data.aggr <- alluv.data.aggr[, 1:4]
colnames(alluv.data.aggr) <- c("AC", "LP", "PP", "Freq")
# get all history of 'linha de pesquisa'
linhas <- na.exclude(unique(alluv.data$sucupira.raw..Linha.de.Pesquisa.))
# ordering
ordering <- c()
for(i in 1:length(alluv.data.aggr$PP)){
index <- match(alluv.data.aggr$PP[i],
sucupira.raw..Nome.do.Projeto.de.Pesquisa)
ordering <- c(ordering, start[index])
}
length(alluv.data.aggr$PP)
# ordering
ordering <- c()
for(i in 1:length(alluv.data.aggr$PP)){
index <- match(alluv.data.aggr$PP[i],
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.)
ordering <- c(ordering, start[index])
}
# recoding
alluv.data.aggr$AC <- as.numeric(as.factor(alluv.data.aggr$AC))
alluv.data.aggr$LP <- as.numeric(as.factor(alluv.data.aggr$LP))
alluv.data.aggr$PP <- as.numeric(as.factor(alluv.data.aggr$PP))
# colors
alluv.colors <- c()
for(i in 1:length(alluv.data.aggr$LP)) {
alluv.colors <- c(alluv.colors,
brewer.pal(n = length(linhas), name = "Set3")[alluv.data.aggr$LP[i]])
}
# plot 1
alluvial(
alluv.data.aggr[, 1:3],
freq = alluv.data.aggr$Freq,
col = alluv.colors,
border = NA,
blocks = FALSE,
ordering = list(
order(ordering, decreasing = TRUE),
order(ordering, decreasing = TRUE),
order(ordering, decreasing = TRUE)
)
)
ordering
ordering <-
as.Date(as.POSIXct(as.numeric(ordering), origin = "1970-01-01"))
ordering
# ordering
ordering <- c()
for(i in 1:length(alluv.data.aggr$PP)){
index <- match(alluv.data.aggr$PP[i],
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.)
ordering <- c(ordering, start[index])
}
ordering
options(knitr.kable.NA = '--', knitr.table.format = "html")
# structure the alluvial plot
# projetos
sheet <- "Projetos"
source("Scripts/read_sucupira.R")
alluv.data <-
data.frame(
sucupira.raw$`Área de Concentração`,
sucupira.raw$`Linha de Pesquisa`,
sucupira.raw$`Nome do Projeto de Pesquisa`
)
start <- sucupira.raw$`Data de Início`[complete.cases(alluv.data)]
alluv.data <- alluv.data[complete.cases(alluv.data),]
alluv.data.aggr <-
aggregate(
alluv.data,
by = list(
alluv.data$sucupira.raw..Área.de.Concentração.,
alluv.data$sucupira.raw..Linha.de.Pesquisa.,
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.
),
FUN = length
)
# drop repeated columns
alluv.data.aggr <- alluv.data.aggr[, 1:4]
colnames(alluv.data.aggr) <- c("AC", "LP", "PP", "Freq")
# get all history of 'linha de pesquisa'
linhas <- na.exclude(unique(alluv.data$sucupira.raw..Linha.de.Pesquisa.))
# ordering
ordering <- c()
for(i in 1:length(alluv.data.aggr$PP)){
index <- match(alluv.data.aggr$PP[i],
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.)
ordering <- c(ordering, start[index])
}
ordering <-
as.Date(as.POSIXct(as.numeric(ordering), origin = "1970-01-01"))
# recoding
alluv.data.aggr$AC <- as.numeric(as.factor(alluv.data.aggr$AC))
alluv.data.aggr$LP <- as.numeric(as.factor(alluv.data.aggr$LP))
alluv.data.aggr$PP <- as.numeric(as.factor(alluv.data.aggr$PP))
# colors
alluv.colors <- c()
for(i in 1:length(alluv.data.aggr$LP)) {
alluv.colors <- c(alluv.colors,
brewer.pal(n = length(linhas), name = "Set3")[alluv.data.aggr$LP[i]])
}
# plot area setup
par(
oma = c(1, 1, 1, 1),
mar = c(1, 1, 1, 1),
bg = '#2C3E50',
col.lab = "white",
col.axis = NA,
fg = NA
)
# plot 1
alluvial(
alluv.data.aggr[, 1:3],
freq = alluv.data.aggr$Freq,
col = alluv.colors,
border = NA,
blocks = FALSE,
ordering = list(
order(ordering, decreasing = TRUE),
order(ordering, decreasing = TRUE),
order(ordering, decreasing = TRUE)
)
)
title(main = "Área de Concentração - Linhas de Pesquisa - Projetos de Pesquisa",
outer = TRUE,
col.main = "white",
cex.main = 1.15)
# ordering
ordering <- c()
options(knitr.kable.NA = '--', knitr.table.format = "html")
# structure the alluvial plot
# projetos
sheet <- "Projetos"
source("Scripts/read_sucupira.R")
source("Scripts/read_sucupira.R")
alluv.data <-
data.frame(
sucupira.raw$`Área de Concentração`,
sucupira.raw$`Linha de Pesquisa`,
sucupira.raw$`Nome do Projeto de Pesquisa`
)
start <- sucupira.raw$`Data de Início`[complete.cases(alluv.data)]
alluv.data <- alluv.data[complete.cases(alluv.data),]
alluv.data.aggr <-
aggregate(
alluv.data,
by = list(
alluv.data$sucupira.raw..Área.de.Concentração.,
alluv.data$sucupira.raw..Linha.de.Pesquisa.,
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.
),
FUN = length
)
alluv.data.aggr <-
aggregate(
alluv.data,
by = list(
alluv.data$sucupira.raw..Área.de.Concentração.,
alluv.data$sucupira.raw..Linha.de.Pesquisa.,
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.
),
FUN = length
)
# drop repeated columns
alluv.data.aggr <- alluv.data.aggr[, 1:4]
# get all history of 'linha de pesquisa'
linhas <- na.exclude(unique(alluv.data$sucupira.raw..Linha.de.Pesquisa.))
# ordering
ordering <- c()
for(i in 1:length(alluv.data.aggr$PP)){
index <- match(alluv.data.aggr$PP[i],
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.)
ordering <- c(ordering, start[index])
}
ordering
for(i in 1:length(alluv.data.aggr$PP)){
index <- match(alluv.data.aggr$PP[i],
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.)
ordering <- c(ordering, start[index])
}
ordering <- c(ordering, start[index])
# ordering
ordering <- c()
for(i in 1:length(alluv.data.aggr$PP)){
index <- match(alluv.data.aggr$PP[i],
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.)
ordering <- c(ordering, start[index])
}
ordering
# ordering
ordering <- c()
for(i in 1:length(alluv.data.aggr$PP)){
index <- match(alluv.data.aggr$PP[i],
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.)
ordering <- c(ordering, start[index])
}
ordering
# structure the alluvial plot
# projetos
sheet <- "Projetos"
source("Scripts/read_sucupira.R")
start <- sucupira.raw$`Data de Início`[complete.cases(alluv.data)]
alluv.data <- alluv.data[complete.cases(alluv.data),]
alluv.data.aggr <-
aggregate(
alluv.data,
by = list(
alluv.data$sucupira.raw..Área.de.Concentração.,
alluv.data$sucupira.raw..Linha.de.Pesquisa.,
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.
),
FUN = length
)
# drop repeated columns
alluv.data.aggr <- alluv.data.aggr[, 1:4]
colnames(alluv.data.aggr) <- c("AC", "LP", "PP", "Freq")
# get all history of 'linha de pesquisa'
linhas <- na.exclude(unique(alluv.data$sucupira.raw..Linha.de.Pesquisa.))
# ordering
ordering <- c()
for(i in 1:length(alluv.data.aggr$PP)){
index <- match(alluv.data.aggr$PP[i],
alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.)
ordering <- c(ordering, start[index])
}
ordering
as.numeric(ordering)
as.Date(as.POSIXct(ordering, origin = "1970-01-01"))
as.Date(as.POSIXct(ordering)
as.Date(as.POSIXct(ordering), origin = "01-01-1970"))
as.Date(as.POSIXct(as.numeric(ordering), origin = "1970-01-01"))
ordering)
ordering
as.Date(ordering,
format = "%m/%d/%y")
as.Date(ordering,
format = "%m/%d/%y")
order(as.Date(ordering,
format = "%m/%d/%y"))
as.Date(ordering, format = "%y")
order(ordering, decreasing = TRUE)
