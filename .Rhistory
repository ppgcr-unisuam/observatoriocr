andamento.ano <-
matrix(NA, nrow = length(linhas), ncol = length(anos))
colnames(andamento.ano) <- anos
rownames(andamento.ano) <- linhas
concluido.ano <- andamento.ano
for (i in 1:length(anos)) {
projetos <- projetos.list[[i]]
projetos <-
projetos[projetos$`Membro Responsável` == "Sim" &
projetos$Situação == "EM ANDAMENTO",]
for (j in 1:length(linhas)) {
andamento.ano[j, i] <-
sum(projetos$`Linha de Pesquisa` == linhas[j], na.rm = TRUE)
}
projetos <- projetos.list[[i]]
projetos <-
projetos[projetos$`Membro Responsável` == "Sim" &
projetos$Situação == "CONCLUÍDO",]
for (j in 1:length(linhas)) {
concluido.ano[j, i] <-
sum(projetos$`Linha de Pesquisa` == linhas[j], na.rm = TRUE)
}
}
projetos.ano <- andamento.ano + concluido.ano
projetos.ano <-
projetos.ano[, order(colnames(projetos.ano), decreasing = FALSE)]
# projetos - membros
sheet <- "Projetos - Membros"
source("Scripts/read_sucupira.R")
source("Scripts/read_sucupira.R")
# get all history of 'linha de pesquisa'
linhas <- na.exclude(unique(sucupira.raw$`Linha de Pesquisa`))
projetos.list <- sucupira.list
projetos.list <- sucupira.list
# list all available years
anos <- as.numeric(list.dirs(file.path(getwd(), "Sucupira"), recursive = FALSE, full.names = FALSE))
# initialize data structure
andamento.ano <-
matrix(NA, nrow = length(linhas), ncol = length(anos))
colnames(andamento.ano) <- anos
rownames(andamento.ano) <- linhas
concluido.ano <- andamento.ano
for (i in 1:length(anos)) {
projetos <- projetos.list[[i]]
projetos <-
projetos[projetos$`Membro Responsável` == "Sim" &
projetos$Situação == "EM ANDAMENTO",]
for (j in 1:length(linhas)) {
andamento.ano[j, i] <-
sum(projetos$`Linha de Pesquisa` == linhas[j], na.rm = TRUE)
}
projetos <- projetos.list[[i]]
projetos <-
projetos[projetos$`Membro Responsável` == "Sim" &
projetos$Situação == "CONCLUÍDO",]
for (j in 1:length(linhas)) {
concluido.ano[j, i] <-
sum(projetos$`Linha de Pesquisa` == linhas[j], na.rm = TRUE)
}
}
projetos.ano <- andamento.ano + concluido.ano
projetos.ano <-
projetos.ano[, order(colnames(projetos.ano), decreasing = FALSE)]
layout(matrix(
c(1:2),
nrow = 2,
ncol = 1,
byrow = TRUE
), heights = c(1 / 2, 1 / 2))
par(
oma = c(2, 0.1, 2, 0.1),
mar = c(5, 4, 2, 2),
bg = '#2C3E50',
col.lab = "white",
col.axis = "white",
fg = "white"
)
# generate plot of projetos per linha by year
barplot(
projetos.ano,
xlab = "Ano",
ylab = "Quantidade",
col = brewer.pal(n = length(linhas), name = "Set3"),
xaxt = 'n',
ann = FALSE
)
axis(2, at = c(0, 100))
View(projetos.ano)
View(projetos.ano)
options(knitr.kable.NA = '--', knitr.table.format = "html")
# projetos - membros
sheet <- "Projetos - Membros"
source("Scripts/read_sucupira.R")
# get all history of 'linha de pesquisa'
linhas <- na.exclude(unique(sucupira.raw$`Linha de Pesquisa`))
projetos.list <- sucupira.list
# list all available years
anos <-
as.numeric(list.dirs(
file.path(getwd(), "Sucupira"),
recursive = FALSE,
full.names = FALSE
))
# initialize data structure
andamento.ano <-
matrix(NA, nrow = length(linhas), ncol = length(anos))
colnames(andamento.ano) <- anos
rownames(andamento.ano) <- linhas
concluido.ano <- andamento.ano
# iterate across all Sucupira list elements to search for active and closed projects
for (i in 1:length(anos)) {
projetos <- projetos.list[[i]]
projetos <-
projetos[projetos$`Membro Responsável` == "Sim" &
projetos$Situação == "EM ANDAMENTO",]
for (j in 1:length(linhas)) {
andamento.ano[j, i] <-
sum(projetos$`Linha de Pesquisa` == linhas[j], na.rm = TRUE)
}
projetos <- projetos.list[[i]]
projetos <-
projetos[projetos$`Membro Responsável` == "Sim" &
projetos$Situação == "CONCLUÍDO",]
for (j in 1:length(linhas)) {
concluido.ano[j, i] <-
sum(projetos$`Linha de Pesquisa` == linhas[j], na.rm = TRUE)
}
}
projetos.ano <- andamento.ano + concluido.ano
projetos.ano <-
projetos.ano[, order(colnames(projetos.ano), decreasing = FALSE)]
# plot area setup
par(
oma = c(2, 0.1, 2, 0.1),
mar = c(5, 4, 2, 2),
bg = '#2C3E50',
col.lab = "white",
col.axis = "white",
fg = "white",
col.main = "white"
)
# generate plot of projetos per linha by year (absolute frequency)
barplot(
projetos.ano,
ylab = "Frequência",
col = brewer.pal(n = length(linhas), name = "Set3"),
xaxt = 'n'
)
# generate plot of projetos per linha by year (relative frequency)
barplot(
scale(
as.matrix(projetos.ano),
center = FALSE,
scale = colSums(as.matrix(projetos.ano))
) * 100,
ylab = "Proporção",
col = brewer.pal(n = length(linhas), name = "Set3"),
xaxt = 'n',
ylim = c(0, 100)
)
# legend("top", legend = linhas, fill = brewer.pal(n = length(linhas), name = "Set3"), box.lwd = 0, cex = 1)
options(knitr.kable.NA = '--', knitr.table.format = "html")
# projetos - membros
sheet <- "Projetos - Membros"
source("Scripts/read_sucupira.R")
# get all history of 'linha de pesquisa'
linhas <- na.exclude(unique(sucupira.raw$`Linha de Pesquisa`))
projetos.list <- sucupira.list
# list all available years
anos <-
as.numeric(list.dirs(
file.path(getwd(), "Sucupira"),
recursive = FALSE,
full.names = FALSE
))
# initialize data structure
andamento.ano <-
matrix(NA, nrow = length(linhas), ncol = length(anos))
colnames(andamento.ano) <- anos
rownames(andamento.ano) <- linhas
concluido.ano <- andamento.ano
# iterate across all Sucupira list elements to search for active and closed projects
for (i in 1:length(anos)) {
projetos <- projetos.list[[i]]
projetos <-
projetos[projetos$`Membro Responsável` == "Sim" &
projetos$Situação == "EM ANDAMENTO",]
for (j in 1:length(linhas)) {
andamento.ano[j, i] <-
sum(projetos$`Linha de Pesquisa` == linhas[j], na.rm = TRUE)
}
projetos <- projetos.list[[i]]
projetos <-
projetos[projetos$`Membro Responsável` == "Sim" &
projetos$Situação == "CONCLUÍDO",]
for (j in 1:length(linhas)) {
concluido.ano[j, i] <-
sum(projetos$`Linha de Pesquisa` == linhas[j], na.rm = TRUE)
}
}
projetos.ano <- andamento.ano + concluido.ano
projetos.ano <-
projetos.ano[, order(colnames(projetos.ano), decreasing = FALSE)]
# plot area setup
par(
oma = c(2, 0.1, 2, 0.1),
mar = c(5, 4, 2, 2),
bg = '#2C3E50',
col.lab = "white",
col.axis = "white",
fg = "white",
col.main = "white"
)
# generate plot of projetos per linha by year (absolute frequency)
barplot(
projetos.ano,
ylab = "Frequência",
col = brewer.pal(n = length(linhas), name = "Set3"),
)
# generate plot of projetos per linha by year (relative frequency)
barplot(
scale(
as.matrix(projetos.ano),
center = FALSE,
scale = colSums(as.matrix(projetos.ano))
) * 100,
ylab = "Proporção",
col = brewer.pal(n = length(linhas), name = "Set3"),
ylim = c(0, 100)
)
# legend("top", legend = linhas, fill = brewer.pal(n = length(linhas), name = "Set3"), box.lwd = 0, cex = 1)
# get only current 'linha de pesquisa'
linhas.curr <- na.exclude(unique(sucupira.list[[length(anos)]]$`Linha de Pesquisa`))
linhas.curr
par('user')
warnings()
warnings(50)
warnings
warnings(10)
par(warn = 1)
par(warning = 1)
install.packages(c("cli", "clubSandwich", "dtplyr", "glue", "gtsummary", "testthat"))
library(devtools)
install_github("r-spatial/sf")
# create a new code chunk and then use the PACKUP add-in to generate this code with all the required libraries for this Rmd
library(bsplus)
library(cowplot)
library(dplyr)
library(geobr)
library(ggplot2)
library(ggpubr)
library(grid)
library(gridExtra)
library(gtsummary)
library(htmlwidgets)
library(igraph)
library(kableExtra)
library(knitr)
library(magrittr)
library(RColorBrewer)
library(readxl)
library(Rmisc)
library(sf)
library(tm)
library(viridis)
library(webshot2)
library(wordcloud2)
discentes.raw <-
read_excel("../PPGCR Unisuam/Discentes.xlsx", sheet = "DATA.discentes")
options(knitr.kable.NA = '--', knitr.table.format = "html")
discentes.raw <-
read_excel("../PPGCR Unisuam/Discentes.xlsx", sheet = "DATA.discentes")
discentes <- discentes.raw[discentes.raw$`Ano Titulação` != "*", ]
mestres <- discentes[discentes$Curso == "Mestrado", ]
doutores <- discentes[discentes$Curso == "Doutorado", ]
par(
oma = c(2, 0.1, 2, 0.1),
mar = c(5, 4, 2, 2),
bg = '#2C3E50',
col.lab = "white",
col.axis = "white",
fg = "white",
col.main = "white"
)
# generate plot of titulados per year
table.1 <- table(discentes$Curso, discentes$`Ano Titulação`)
options(knitr.kable.NA = '--', knitr.table.format = "html")
discentes.raw <-
read_excel("../PPGCR Unisuam/Discentes.xlsx", sheet = "DATA.discentes")
discentes <- discentes.raw[discentes.raw$`Ano Titulação` != "*", ]
mestres <- discentes[discentes$Curso == "Mestrado", ]
doutores <- discentes[discentes$Curso == "Doutorado", ]
par(
oma = c(2, 0.1, 2, 0.1),
mar = c(5, 4, 2, 2),
bg = '#2C3E50',
col.lab = "white",
col.axis = "white",
fg = "white",
col.main = "white"
)
# generate plot of titulados per year
table.1 <- table(discentes$Curso, discentes$`Ano Titulação`)
barplot(
as.matrix(table.1),
xlab = "Ano",
ylab = "Titulados",
col = c("darkblue", "lightblue"),
bty = "n"
)
legend(
"topleft",
legend = levels(as.factor(discentes$Curso)),
fill = c("darkblue", "lightblue"),
box.lty = 0
)
cat("<br>")
cat('<hr style="height:2px;border-width:0;color:white;background-color:white">')
cat("<br>")
cat("<h1 style='text-align:center;'> **Tempo médio de titulação, por ano** </h1>  \n")
par(
oma = c(2, 0.1, 2, 0.1),
mar = c(5, 4, 2, 2),
bg = '#2C3E50',
col.lab = "white",
col.axis = "white",
fg = "white",
col.main = "white"
)
# generate plot of tempo para titulação per year
tmt.mestr.ano <-
aggregate(
as.numeric(mestres$`Tempo de Curso (meses)`),
by = list(mestres$`Ano Titulação`),
FUN = mean,
na.rm = TRUE
)
tmt.dout.ano <-
aggregate(
as.numeric(doutores$`Tempo de Curso (meses)`),
by = list(doutores$`Ano Titulação`),
FUN = mean,
na.rm = TRUE
)
plot(
tmt.mestr.ano$Group.1,
tmt.mestr.ano$x,
type = "l",
lty = 1,
lwd = 6,
xlab = "Ano",
ylab = "Meses",
col = c("lightblue"),
ylim = c(18, 60),
bty = "n"
)
lines(
tmt.dout.ano$Group.1,
tmt.dout.ano$x,
type = "l",
lty = 1,
lwd = 6,
xlab = "Ano",
ylab = "Meses",
col = c("darkblue"),
ylim = c(18, 60)
)
legend(
"topleft",
legend = levels(as.factor(discentes$Curso)),
col = c("darkblue", "lightblue"),
pch = "lines",
lwd = 6,
box.lty = 0
)
cat("<br>")
cat('<hr style="height:2px;border-width:0;color:white;background-color:white">')
cat("<br>")
# code for html anchor from yml file
cat('<div id="egressos" class="section level2">', sep = "")
cat('<h2></h2>')
cat('<h1> [**Egressos**](pessoas.html#egressos) </h1>')
par(
oma = c(0, 0, 0, 0),
mar = c(0, 0, 0, 0),
bg = '#2C3E50',
col.lab = "white",
col.axis = "white",
fg = "white",
col.main = "white"
)
datasets <- list_geobr()$years[3]
last.update <-
as.numeric(strsplit(datasets, ", ")[[1]][length(strsplit(datasets, ", ")[[1]]) - 1])
states <-
read_state(
code_state = "all",
year = last.update,
simplified = TRUE,
showProgress = FALSE
)
states <-
read_state(
code_state = "all",
year = last.update,
simplified = TRUE,
showProgress = FALSE
)
states <-
read_state(
code_state = "all",
year = last.update,
simplified = TRUE,
showProgress = FALSE
)
# read packages
library(knitr)
library(kableExtra)
library(kableExtra)
library(magrittr)
library(readxl)
library(tidyverse)
library(tidyverse)
# read SCImago csv file (download from https://www.scimagojr.com)
scimago <-
read.csv(
"SJR/scimagojr 2020.csv",
header = TRUE,
sep = ";",
quote = "\"",
dec = ",",
fill = TRUE
)
# read QUALIS xlsx file (donwload from https://www.scimagojr.com)
qualis <-
data.frame(read_excel(
"Qualis/QUALIS Referência 2017-2018.xlsx",
sheet = 1,
col_types = c("text")
))
# Step 4. Read in a CSV file into a data frame with a bunch of dois listed in one column.
dois <-
data.frame(read_excel(
"../PPGCR Unisuam/Produção.xlsx",
sheet = "PI.artigos",
col_types = c("text")
))
# Data cleaning
dois <- dois[complete.cases(dois$DOI),]
# Filtra por período
dois <- dois[dois$Publicado.em <= 2009,]
# Verifica se há DOIs no período
if (dim(dois)[1] == 0) {
cat('\n')
cat('*Sem produção para exibir no período*')
cat('\n')
} else {
# Step 5. Convert the doi column in your dataset to a list.
dois_list <- as.list(dois$DOI)
# roda o script para obter dados do Altmetric
source("scripts/altmetrics_using_doi.R")
# remove duplicate entries
doi_unique <-
doi_reshaped_data[!duplicated(doi_reshaped_data$doi), ]
# sort columns by title
doi_sort <-
doi_unique[order(doi_unique$title), ]
# get data of papers without Altmetrics from CrossRef
my_dois_works <-
rcrossref::cr_works(dois = unlist(no_altmetric_dois_list)) %>%
pluck("data")
# sort columns by title
my_dois_works <-
my_dois_works[order(as.vector(my_dois_works$title)), ]
# print table of papers with/without badges
source("scripts/table_with_badges.R")
}
numeric(0)
#Dummy data
Ixos <- rnorm(4000,100,30)
Primadur <- Ixos+rnorm(4000 , 0 , 30)
#Divide the screen in 1 line and 2 columns
par(
mfrow=c(1,2),
oma = c(0, 0, 2, 0)
)
#Make the margin around each graph a bit smaller
par(mar=c(4,2,2,2))
# Histogram and Scatterplot
hist(Ixos,  main="" , breaks=30 , col=rgb(0.3,0.5,1,0.4) , xlab="height" , ylab="nbr of plants")
plot(Ixos , Primadur,  main="" , pch=20 , cex=0.4 , col=rgb(0.3,0.5,1,0.4)  , xlab="primadur" , ylab="Ixos" )
#And I add only ONE title :
mtext("Primadur : Distribution and correlation with Ixos", outer = TRUE, cex = 1.5, font=4, col=rgb(0.1,0.3,0.5,0.5) )
#Dummy data
Ixos <- rnorm(4000,100,30)
Primadur <- Ixos+rnorm(4000 , 0 , 30)
#Divide the screen in 1 line and 2 columns
par(
mfrow=c(1,2),
oma = c(0, 0, 2, 0)
)
#Make the margin around each graph a bit smaller
par(mar=c(0,0,0,0))
# Histogram and Scatterplot
hist(Ixos,  main="" , breaks=30 , col=rgb(0.3,0.5,1,0.4) , xlab="height" , ylab="nbr of plants")
plot(Ixos , Primadur,  main="" , pch=20 , cex=0.4 , col=rgb(0.3,0.5,1,0.4)  , xlab="primadur" , ylab="Ixos" )
#And I add only ONE title :
mtext("Primadur : Distribution and correlation with Ixos", outer = TRUE, cex = 1.5, font=4, col=rgb(0.1,0.3,0.5,0.5) )
warnings()
plot(c(100, 250), c(300, 450), type = "n", xlab = "", ylab = "")
image <- as.raster(matrix(0:1, ncol = 5, nrow = 3))
rasterImage(image, 100, 300, 150, 350, interpolate = FALSE)
