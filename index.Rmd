---
title: OBSERVATÓRIO CR

output:
  html_document:
    toc: false
---

<!--install and/or load all R packages-->

```{r setup, include = FALSE, echo = FALSE, warning = FALSE, message = FALSE}
source("Scripts/all-required-packages.R")
```

<!--custom CSS scripts for ALL PAGES-->

<!--script for hover effect on table-->
```{css, echo = FALSE}
.table-hover > tbody > tr:hover { 
  background-color: #18BC9C;
  }
```

<!--custom CSS scripts for THIS PAGE ONLY-->

<!--script for background color-->
```{css, echo = FALSE}
body {
  background-color: #2C3E50 !important;
  color: white;
  }
```

<!--script for centering titles-->
```{css, echo = FALSE}
h1.title {
  text-align: center;
  font-weight: bold;
}
h1 {
  text-align: center;
  font-weight: bold;
}
h2 {
  text-align: center;
  font-weight: bold;
}
h3 {
  text-align: center;
  font-weight: bold;
}
```

<!--script for removing background shading of carousel controls-->
```{css, echo = FALSE}
.carousel-control.left, .carousel-control.right {
   background-image:none !important;
   filter:none !important;
   }
```

<br>

<br>

<center>

<img src="Images/logo-IES.png" align="center"/>

<br>

```{r index-text-1, include = TRUE, echo = FALSE, warning = FALSE, message = TRUE, fig.align = 'center', results = "asis", out.width = "100%"}
cat('<p style="font-size:1.5em">', readtext("Texts/index-text-1.txt")$text, '</p>')
```

</center>

<br>

<br>

```{r sintese-coerencia, include = FALSE, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "hide", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# projetos
sheet <- "Projetos"
source("Scripts/read-xls-sucupira.R")

current.sucupira <- sucupira.list[[length(sucupira.list)]]

current.AC <-
  unique(current.sucupira$`Área de Concentração`[current.sucupira$Situação == "EM ANDAMENTO"], na.rm = TRUE)
current.LP <-
  unique(current.sucupira$`Linha de Pesquisa`[current.sucupira$Situação == "EM ANDAMENTO"], na.rm = TRUE)
current.AC <- current.AC[!is.na(current.AC)]
current.LP <- current.LP[!is.na(current.LP)]

# structure the alluvial plot
alluv.data <-
  data.frame(
    sucupira.raw$`Área de Concentração`,
    sucupira.raw$`Linha de Pesquisa`,
    sucupira.raw$`Nome do Projeto de Pesquisa`,
    sucupira.raw$`Data da Situação`,
    sucupira.raw$Situação
  )

start <- sucupira.raw$`Data de Início`[complete.cases(alluv.data)]
alluv.data <- alluv.data[complete.cases(alluv.data), ]

alluv.data.aggr <-
  aggregate(
    alluv.data,
    by = list(
      alluv.data$sucupira.raw..Área.de.Concentração.,
      alluv.data$sucupira.raw..Linha.de.Pesquisa.,
      alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.
    ),
    FUN = length
  )

# drop repeated columns
alluv.data.aggr <- alluv.data.aggr[, 1:4]
colnames(alluv.data.aggr) <- c("AC", "LP", "PP", "Freq")

# get all history of 'linha de pesquisa'
linhas <-
  as.character(na.exclude(unique(
    alluv.data$sucupira.raw..Linha.de.Pesquisa.
  )))

# ordering
ordering <- c()
for (i in 1:length(alluv.data.aggr$PP)) {
  index <- match(alluv.data.aggr$PP[i],
                 alluv.data$sucupira.raw..Nome.do.Projeto.de.Pesquisa.)
  ordering <- c(ordering, start[index])
}
ordering <-
  as.Date(ordering, format = "%d/%m/%y")

# recoding
alluv.data.aggr$AC <- as.numeric(as.factor(alluv.data.aggr$AC))
alluv.data.aggr$LP <- as.numeric(as.factor(alluv.data.aggr$LP))
alluv.data.aggr$PP <- as.numeric(as.factor(alluv.data.aggr$PP))

# colors
alluv.colors <- c()
for (i in 1:length(alluv.data.aggr$LP)) {
  alluv.colors <- c(alluv.colors,
                    brewer.pal(n = length(linhas), name = "Set3")[alluv.data.aggr$LP[i]])
}

# plot 1

# plot area setup
layout.m <- c(1, 1, 1, 1, 2)
source("Scripts/plot-margins.R")

# plot 1 (fluxo AC -> LP -> PP)
alluvial(
  alluv.data.aggr[, 1:3],
  freq = alluv.data.aggr$Freq,
  col = alluv.colors,
  border = alluv.colors,
  blocks = FALSE,
  ordering = list(NULL,
                  NULL,
                  order(ordering, decreasing = FALSE))
)
title(main = "Área de Concentração - Linhas de Pesquisa - Projetos de Pesquisa",
      outer = TRUE,
      cex.main = 1.8)

plot(
  0,
  xaxt = 'n',
  yaxt = 'n',
  bty = 'n',
  pch = '',
  ylab = '',
  xlab = ''
)
legend(
  "center",
  legend = linhas,
  fill = brewer.pal(n = length(linhas), name = "Set3"),
  text.col = "white",
  box.lwd = 0,
  bty = "n",
  hor = FALSE,
  ncol = ceiling(length(linhas) / 2),
  cex = 0.9
)

# plot 2

# plot area setup
layout.m <- matrix(c(1, 2), ncol = 1, byrow = TRUE)
source("Scripts/plot-margins.R")

summ.coerencia <- c(length(unique(current.AC)),
                    length(unique(current.LP)))
names(summ.coerencia) <-
  c("Área de Concentração", "Linhas de Pesquisa")

summ.data <- summ.coerencia
source("Scripts/plot-summaries.R")
```

```{r sintese-coerencia-carousel, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "asis", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# carousel
bs_carousel(id = "coerencia-carousel",
            use_indicators = FALSE,
            use_controls = TRUE) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-coerencia-1.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-coerencia-2.png"))
```

*Fontes:* [**Plataforma Sucupira**](https://sucupira.capes.gov.br/sucupira/)

<br>

<br>

```{r sintese-temas, include = FALSE, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "hide", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# file path to save the wordclouds
dir.path <- file.path(getwd(), "index_files", "figure-html")
dir.create(dir.path, recursive = TRUE)

# projetos
sheet <- "Projetos"
source("Scripts/read-xls-sucupira.R")
data.to.cloud <- sucupira.raw$`Nome do Projeto de Pesquisa`
cloud.title <- "Temas de Projetos"
source("Scripts/docs-to-wordcloud.R")

# dissertações e teses
sheet <- "TCC"
source("Scripts/read-xls-sucupira.R")
data.to.cloud <- sucupira.raw$`Nome do Trabalho de Conclusão`
cloud.title <- "Dissertações e Teses"
source("Scripts/docs-to-wordcloud.R")

# artigos
sheet <- "Produções"
source("Scripts/read-xls-sucupira.R")
data.to.cloud <- sucupira.raw$`Nome da Produção`
cloud.title <- "Temas de Produção"
source("Scripts/docs-to-wordcloud.R")
```

```{r sintese-temas-carousel, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "asis", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# carousel of wordclouds
bs_carousel(id = "temas-carouse",
            use_indicators = FALSE,
            use_controls = TRUE) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/Projetos.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/TCC.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/Produções.png"))
```

*Fontes:* [**Plataforma Sucupira**](https://sucupira.capes.gov.br/sucupira/)

<br>

<br>

```{r sintese-projetos, include = FALSE, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "hide", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# projetos - membros
sheet <- "Projetos - Membros"
source("Scripts/read-xls-sucupira.R")
projetos.list <- sucupira.list

# list all available years
anos <-
  as.numeric(
    list.dirs(
      file.path(getwd(), "Sucupira"),
      full.names = FALSE,
      recursive = FALSE
    )
  )

# get all history of 'linha de pesquisa'
linhas <-
  as.character(na.exclude(unique(sucupira.raw$`Linha de Pesquisa`)))

# initialize data structure
andamento.ano <-
  matrix(NA, nrow = length(linhas), ncol = length(anos))
colnames(andamento.ano) <- anos
rownames(andamento.ano) <- linhas
concluido.ano <- andamento.ano

# iterate across all Sucupira list elements to search for active and closed projects
for (i in 1:length(anos)) {
  # active
  projetos <- projetos.list[[i]]
  projetos <-
    projetos[projetos$`Membro Responsável` == "Sim" &
               projetos$Situação == "EM ANDAMENTO",]
  for (j in 1:length(linhas)) {
    andamento.ano[j, i] <-
      sum(projetos$`Linha de Pesquisa` == linhas[j], na.rm = TRUE)
  }
  # closed
  projetos <- projetos.list[[i]]
  projetos <-
    projetos[projetos$`Membro Responsável` == "Sim" &
               projetos$Situação == "CONCLUÍDO",]
  for (j in 1:length(linhas)) {
    concluido.ano[j, i] <-
      sum(projetos$`Linha de Pesquisa` == linhas[j], na.rm = TRUE)
  }
}
projetos.ano <- andamento.ano + concluido.ano
projetos.ano <-
  projetos.ano[, order(colnames(projetos.ano), decreasing = FALSE)]

membros <-
  data.frame(sucupira.raw$`Nome do Membro do Projeto`,
             sucupira.raw$`Categoria do Membro do Projeto`)
membros <- membros[!duplicated(membros), ]
categorias <-
  table(membros$sucupira.raw..Categoria.do.Membro.do.Projeto.)

# calculate summary statistics for projetos
summ.table.projetos <-
  c(paste0(
    formatC(
      sum(na.omit(concluido.ano)),
      format = "d",
      digits = 0,
      big.mark = ".",
      decimal.mark = ","
    )
  ),
  paste0(
    formatC(
      sum(na.omit(andamento.ano[, dim(andamento.ano)[2]])),
      format = "d",
      digits = 0,
      big.mark = ".",
      decimal.mark = ","
    )
  ),
  categorias,
  sum(categorias))
names(summ.table.projetos) <-
  c("Projetos concluídos",
    "Projetos em andamento",
    names(categorias),
    "Total")

# plot area setup
layout.m <- c(1)
source("Scripts/plot-margins.R")

# plot 1 (total de projetos por linha, por ano)
barplot(projetos.ano,
        ylab = "N",
        col = brewer.pal(n = length(linhas), name = "Set3"))
title(main = "Projetos por Linha de Pesquisa",
      outer = TRUE,
      cex.main = 1.7)
legend(
  "topright",
  legend = linhas,
  fill = brewer.pal(n = length(linhas), name = "Set3"),
  text.col = "white",
  box.lwd = 0,
  bty = "n",
  horiz = FALSE,
  cex = 0.70,
)

# plot 2 (percentual de projetos por linha, por ano)
barplot(
  scale(
    as.matrix(projetos.ano),
    center = FALSE,
    scale = colSums(as.matrix(projetos.ano))
  ) * 100,
  ylab = "%",
  col = brewer.pal(n = length(linhas), name = "Set3"),
  ylim = c(0, 100)
)
title(main = "Projetos por Linha de Pesquisa",
      outer = TRUE,
      cex.main = 1.7)

# plot 3 (summary table in plot)

# plot area setup
layout.m <- matrix(c(1, 1, 1, 2, 2, 2, 3, 4, 5, 6, 7, 8),
                   ncol = 3,
                   byrow = TRUE)
source("Scripts/plot-margins.R")

summ.data <- summ.table.projetos
source("Scripts/plot-summaries.R")
```

```{r sintese-projetos-carousel, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "asis", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# carousel
bs_carousel(id = "projetos-carouse",
            use_indicators = FALSE,
            use_controls = TRUE) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-projetos-1.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-projetos-2.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-projetos-3.png"))
```

*Fontes:* [**Plataforma Sucupira**](https://sucupira.capes.gov.br/sucupira/)

<br>

<br>

```{r sintese-financiadores, include = FALSE, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "hide", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

options("scipen" = 100, "digits" = 0)

financiadores.raw <-
  read_excel("../PPGCR Unisuam/financiadores.xlsx", sheet = "financiadores")

# select variables to display
financiadores <-
  financiadores.raw %>% select("Ano", "Agência", "Programa", "Total", "Proponente")

# drop rows with empty cells
financiadores <- financiadores[complete.cases(financiadores),]

# generate cross-table
N.editais.agencia.ano <-
  table(financiadores$'Agência', financiadores$'Ano')
N.editais.agencia.ano <-
  N.editais.agencia.ano[, order(colnames(N.editais.agencia.ano), decreasing = FALSE)]

# get all 'agencias'
agencias <-
  na.exclude(rownames(N.editais.agencia.ano))

# plot area setup
layout.m <- c(1)
source("Scripts/plot-margins.R")

# plot 1 (financiadores per agency by year (absolute frequency)
barplot(N.editais.agencia.ano,
        ylab = "N",
        col = brewer.pal(n = length(agencias), name = "Set3"))
title(main = "Editais financiados por agência",
      outer = TRUE,
      cex.main = 1.7)
legend(
  "topleft",
  legend = agencias,
  fill = brewer.pal(n = length(agencias), name = "Set3"),
  text.col = "white",
  box.lwd = 0,
  bty = "n",
  horiz = FALSE,
  cex = 1,
)

# generate cross-table
T.editais.agencia.ano <-
  with(financiadores, tapply(
    financiadores$Total,
    list(financiadores$'Agência', financiadores$'Ano'),
    FUN = sum
  ))

# add zero to not available values
T.editais.agencia.ano[is.na(T.editais.agencia.ano)] <- 0

T.editais.agencia.ano <-
  T.editais.agencia.ano[, order(colnames(T.editais.agencia.ano), decreasing = FALSE)]

# get all 'agencias'
agencias <-
  na.exclude(rownames(T.editais.agencia.ano))

# plot 2 (financiadores per agency by year (absolute frequency))

# plot area setup
layout.m <- c(1)
source("Scripts/plot-margins.R")

barplot(T.editais.agencia.ano,
        ylab = "R$",
        col = brewer.pal(n = length(agencias), name = "Set3"))
title(main = "Valores financiados por agência",
      outer = TRUE,
      cex.main = 1.7)
legend(
  "topleft",
  legend = agencias,
  fill = brewer.pal(n = length(agencias), name = "Set3"),
  text.col = "white",
  box.lwd = 0,
  bty = "n",
  horiz = FALSE,
  cex = 1,
)

# generate cross-table
professores.ano <-
  rowSums(table(financiadores$Ano, financiadores$Proponente) != 0)

# plot 3 (top-10 editais)

editais <- financiadores$Programa

# plot area setup
layout.m <- c(1)
source("Scripts/plot-margins.R")

# plot area setup
par(mar = c(1.5, 15, 1, 1))

top <- min(length(na.omit(unique(editais))), 10)
data.editais <-
  na.omit(data.frame(name = names(sort(
    table(editais), decreasing = TRUE
  )[1:top]),
  value = as.numeric(sort(
    table(editais), decreasing = TRUE
  )[1:top])))

# break vector names in 2 lines
text.2.break <- data.editais$name
source("Scripts/line-2-break.R")
data.editais$name <- broken_text

barplot(
  height = rev(data.editais$value),
  names = rev(data.editais$name),
  xlab = "N",
  col = rep(brewer.pal(n = 9, name = "Set3")[1], length(1:top)),
  horiz = T,
  las = 1,
  cex.names = 0.7
)
title(
  main = paste0("Top-", top, " editais"),
  outer = TRUE,
  cex.main = 1.7
)

# plot 4 (financiadores per docente by year (absolute frequency))

# plot area setup
layout.m <- c(1)
source("Scripts/plot-margins.R")

barplot(professores.ano,
        ylab = "N",
        col = rep(brewer.pal(n = 9, name = "Set3")[1], length(professores.ano)))
title(main = "Docentes com financiamento",
      outer = TRUE,
      cex.main = 1.7)

# calculate summary statistics for financiamentos
summ.table.financiadores <- matrix(0, nrow = 1, ncol = 5)
summ.table.financiadores <-
  cbind(
    paste0(
      formatC(
        length(na.omit(financiadores$Total)),
        format = "d",
        digits = 0,
        big.mark = ".",
        decimal.mark = ","
      )
    ),
    paste0(
      "R$ ",
      formatC(
        sum(na.omit(financiadores$Total)),
        format = "f",
        digits = 2,
        big.mark = ".",
        decimal.mark = ","
      )
    ),
    paste0("R$ ", formatC(
      median(na.omit(financiadores$Total)),
      format = "f",
      digits = 0,
      big.mark = "."
    )),
    paste0("R$ ", formatC(
      min(na.omit(financiadores$Total)),
      format = "f",
      digits = 0,
      big.mark = "."
    )),
    paste0("R$ ",
           formatC(
             max(na.omit(financiadores$Total)),
             format = "f",
             digits = 0,
             big.mark = "."
           ))
  )
names(summ.table.financiadores) <-
  c("Editais financiados",
        "Total de financiamentos",
        "Mediana anual",
        "Menor",
        "Maior")

# plot 5 (summary table in plot)

# plot area setup
layout.m <-
  matrix(c(1, 1, 2, 2, 3, 3, 4, 5), ncol = 2, byrow = TRUE)
source("Scripts/plot-margins.R")

summ.data <- summ.table.financiadores
source("Scripts/plot-summaries.R")
```

```{r sintese-financiadores-carousel, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "asis", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# carousel
bs_carousel(id = "financiadores-carousel",
            use_indicators = FALSE,
            use_controls = TRUE) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-financiadores-1.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-financiadores-2.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-financiadores-3.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-financiadores-4.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-financiadores-5.png"))
```

*Fontes:* [**CAPES**](https://www.gov.br/capes/pt-br), [**CNPq**](https://www.gov.br/cnpq/pt-br), [**FAPERJ**](http://www.faperj.br), **UNISUAM**

<br>

<br>

```{r sintese-producao, include = FALSE, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "hide", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# read SCImago csv file (download from https://www.scimagojr.com)
scimago <-
  read.csv(
    "SJR/scimagojr 2020.csv",
    header = TRUE,
    sep = ";",
    quote = "\"",
    dec = ",",
    fill = TRUE
  )

# read QUALIS xlsx file (download from https://www.scimagojr.com)
qualis <-
  data.frame(read_excel(
    "Qualis/QUALIS Referência 2017-2018.xlsx",
    sheet = 1,
    col_types = c("text")
  ))

# read data
artigos <-
  data.frame(read_excel(
    "../PPGCR Unisuam/Produção.xlsx",
    sheet = "PI.artigos",
    col_types = c("text")
  ))

# read data
resumos <-
  data.frame(read_excel(
    "../PPGCR Unisuam/Produção.xlsx",
    sheet = "PI.tecnica",
    col_types = c("text")
  ))

# bind papers and letters/abstracts (all with DOI)
artigos <- rbind(artigos[, 1:11], resumos[, 1:11])

# Data cleaning
artigos <- artigos[complete.cases(artigos$DOI), ]
artigos$WebQualis[artigos$WebQualis == "Sem WebQualis"] <- "NA"

# remove os aceitos e submetidos
artigos <-
  artigos[artigos$Publicado.em != "Aceito" &
            artigos$Publicado.em != "Submetido",]

# estratos Qualis
estratos <- sort(unique(artigos$WebQualis))

# SJR
SJR <- c()
for (i in 1:dim(artigos)[1]) {
  SJR.i <-
    as.numeric(scimago[grep(gsub("-", "", artigos$ISSN[i]), scimago$Issn), 6])
  SJR <-
    c(SJR, ifelse(identical(SJR.i, numeric(0)) |
                    all(is.na(SJR.i)), NA, SJR.i))
}

# generate cross tables of artigos per year
table.1 <- table(artigos$Publicado.em)

table.2 <- t(table(artigos$Publicado.em, artigos$WebQualis))
table.2 <- apply(table.2, 2, rev)
table.2 <- table.2[order(rownames(table.2)), ]

table.3 <- data.frame(artigos$Publicado.em, SJR)
table.3.median <-
  aggregate(
    table.3,
    by = list(artigos$Publicado.em),
    FUN = median,
    na.rm = TRUE
  )
table.3.median <- t(as.matrix(table.3.median[,-2]))
table.3.median <- as.numeric(table.3.median[-1, ])
names(table.3.median) <- names(table.1)

# calculate summary statistics for producao
summ.table.producao <-
  cbind(
    sum(table.1),
    formatC(
      min(table.1, na.rm = TRUE),
      format = "d",
      digits = 0,
      big.mark = "."
    ),
    formatC(
      median(table.1, na.rm = TRUE),
      format = "d",
      digits = 0,
      big.mark = "."
    ),
    formatC(
      max(table.1, na.rm = TRUE),
      format = "d",
      digits = 0,
      big.mark = "."
    ),
    formatC(
      min(SJR, na.rm = TRUE),
      format = "f",
      digits = 3,
      big.mark = "."
    ),
    formatC(
      median(SJR, na.rm = TRUE),
      format = "f",
      digits = 3,
      big.mark = "."
    ),
    formatC(
      max(SJR, na.rm = TRUE),
      format = "f",
      digits = 3,
      big.mark = "."
    ),
    paste0(
      formatC(
        sum(table.2[1:4,]) / sum(table.2) * 100,
        format = "d",
        digits = 0,
        big.mark = "."
      ),
      "%"
    ),
    paste0(
      formatC(
        sum(table.2[5:8,]) / sum(table.2) * 100,
        format = "d",
        digits = 0,
        big.mark = "."
      ),
      "%"
    ),
    paste0(
      formatC(
        sum(table.2[9:10,]) / sum(table.2) * 100,
        format = "d",
        digits = 0,
        big.mark = "."
      ),
      "%"
    )
  )

names(summ.table.producao) <-
  c(
    "Artigos publicados",
    "Mínimo",
    "Mediana anual",
    "Máximo",
    "Menor",
    "Mediana SJR",
    "Maior",
    "A1-A4",
    "B1-B4",
    "Outros"
  )

# plot area setup
layout.m <- c(1)
source("Scripts/plot-margins.R")

# plot 1 (total de produção bilbiográfica, por ano)
barplot(table.1,
        ylab = "N",
        col = rep(brewer.pal(n = 9, name = "Set3")[1], length(table.1)))
title(main = "Produção Bibliográfica",
      outer = TRUE,
      cex.main = 1.7)

# plot 2 (total de produção bilbiográfica, por estrato, por ano)
barplot(table.2,
        ylab = "Estrato",
        col = colorRampPalette(brewer.pal(9, "Blues"))(length(estratos)))
title(main = "Qualidade da produção (Qualis)",
      outer = TRUE,
      cex.main = 1.7)
legend(
  "topleft",
  legend = estratos,
  fill = colorRampPalette(brewer.pal(9, "Blues"))(length(estratos)),
  text.col = "white",
  box.lwd = 0,
  bty = "n",
  horiz = FALSE,
  cex = 1,
)

# plot 3 (percentual de produção bilbiográfica, por estrato, por ano)
barplot(
  scale(
    as.matrix(table.2),
    center = FALSE,
    scale = colSums(as.matrix(table.2))
  ) * 100,
  ylab = "%",
  col = colorRampPalette(brewer.pal(9, "Blues"))(length(estratos)),
  ylim = c(0, 100)
)
title(main = "Qualidade da produção (Qualis)",
      outer = TRUE,
      cex.main = 1.7)

# plot 4 (violin plot of SJR por ano)
vioplot(as.numeric(table.3[, 2]) ~ as.numeric(table.3[, 1]),
        xlab = NA,
        ylab = "SJR")
title(main = "Qualidade da produção (SJR)",
      outer = TRUE,
      cex.main = 1.7)

# plot 5 (summary table in plot)

# plot area setup
layout.m <- matrix(c(1, 1, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10),
                   ncol = 3,
                   byrow = TRUE)
source("Scripts/plot-margins.R")

summ.data <- summ.table.producao
source("Scripts/plot-summaries.R")
```

```{r sintese-producao-carousel, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "asis", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# carousel
bs_carousel(id = "producao-carousel",
            use_indicators = FALSE,
            use_controls = TRUE) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-producao-1.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-producao-2.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-producao-3.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-producao-4.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-producao-5.png"))
```

*Fontes:* [**SCImago**](https://www.scimagojr.com), [**WebQualis**](https://sucupira.capes.gov.br/sucupira/public/consultas/coleta/veiculoPublicacaoQualis/listaConsultaGeralPeriodicos.jsf), **UNISUAM**

<br>

<br>

```{r sintese-pessoal, include = FALSE, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "hide", out.widt = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# reading PPG data
discentes.raw <-
  read_excel("../PPGCR Unisuam/Discentes.xlsx", sheet = "DATA.discentes")

# separating egressos (master and doctoral) and current canditates
discentes <-
  discentes.raw[discentes.raw$`Status SAGA` == "Matriculado" |
                  discentes.raw$`Status SAGA` == "Pré-inscrito",]
egressos <- discentes.raw[discentes.raw$`Ano Titulação` != "*",]
mestres <- egressos[egressos$Curso == "Mestrado",]
doutores <- egressos[egressos$Curso == "Doutorado",]

# identifying available courses
cursos <- levels(as.factor(c(discentes$Curso, egressos$Curso)))

# reading BR geospatial data from IPEA
datasets <- list_geobr()$years[3]
last.update <-
  as.numeric(strsplit(datasets, ", ")[[1]][length(strsplit(datasets, ", ")[[1]]) - 1])
states <-
  read_state(
    code_state = "all",
    year = last.update,
    simplified = TRUE,
    showProgress = FALSE
  )

# plot area setup
layout.m <- c(1)
source("Scripts/plot-margins.R")

# generate plot of egressos per year
table.1 <- table(egressos$Curso, egressos$`Ano Titulação`)

# plot 1 (egressos titulados)
barplot(as.matrix(table.1),
        ylab = "Egressos",
        col = brewer.pal(n = 9, name = "Set3"))
title(main = "Formação de pessoal de nível superior",
      outer = TRUE,
      cex.main = 1.7)
legend(
  "topleft",
  legend = cursos,
  fill = brewer.pal(n = 9, name = "Set3"),
  text.col = "white",
  box.lwd = 0,
  bty = "n",
  horiz = FALSE,
  cex = 1
)

# generate plot of tempo para titulação per year
table.2.msc <-
  data.frame(mestres$`Ano Titulação`,
             as.numeric(mestres$`Tempo de Curso (meses)`))
table.2.dsc <-
  data.frame(doutores$`Ano Titulação`,
             as.numeric(doutores$`Tempo de Curso (meses)`))

# plot 2 (violin plot of tempo para titulação por ano)
vioplot(
  as.numeric(table.2.msc[, 2]) ~ as.numeric(table.2.msc[, 1]),
  col = brewer.pal(n = 9, name = "Set3")[2],
  xlab = NA,
  side = "left",
  at = sort(unique(as.numeric(table.2.msc[, 1]))),
  ylim = c(min(
    as.numeric(table.2.msc[, 2]), as.numeric(table.2.dsc[, 2])
  ), max(
    as.numeric(table.2.msc[, 2]), as.numeric(table.2.dsc[, 2])
  )),
  ylab = "Meses"
)
vioplot(
  as.numeric(table.2.dsc[, 2]) ~ as.numeric(table.2.dsc[, 1]),
  col = brewer.pal(n = 9, name = "Set3")[1],
  xlab = NA,
  side = "right",
  ylab = "Meses",
  at = sort(unique(as.numeric(table.2.dsc[, 1]))),
  ylim = c(min(
    as.numeric(table.2.msc[, 2]), as.numeric(table.2.dsc[, 2])
  ), max(
    as.numeric(table.2.msc[, 2]), as.numeric(table.2.dsc[, 2])
  )),
  add = TRUE
)
title(main = "Tempo para titulação",
      outer = TRUE,
      cex.main = 1.7)
legend(
  "topleft",
  legend = cursos,
  fill = brewer.pal(n = 9, name = "Set3"),
  text.col = "white",
  box.lwd = 0,
  bty = "n",
  horiz = FALSE,
  cex = 1
)

# plot 3 (geospatial plot of candidates)
states$discentes <- rep(NA, dim(states)[1])
UF <- as.data.frame(table(discentes$UF))
for (i in 1:length(UF$Var1)) {
  states$discentes[states$abbrev_state == UF$Var1[i]] <- UF$Freq[i]
}

p1 <- ggplot() +
  geom_sf(data = states, aes(fill = discentes), color = "grey") +
  scale_fill_distiller(
    palette = "Spectral",
    name = "Egressos, n",
    limits = c(min(0, UF$Freq), max(UF$Freq)),
    na.value = "grey"
  ) +
  theme_minimal() +
  theme(
    legend.position = 'bottom',
    legend.title = element_text(colour = "white"),
    legend.text = element_text(colour = "white")
  ) +
  theme(
    plot.margin = unit(c(0, 0, 0, 0), "cm"),
    panel.background = element_rect(fill = '#2C3E50', colour = '#2C3E50'),
    plot.background = element_rect(fill = '#2C3E50', colour = '#2C3E50'),
    panel.grid.major = element_line(colour = "transparent"),
    axis.text.x = element_blank(),
    axis.text.y = element_blank(),
    plot.title = element_text(size = 20, color = "white", face = "bold")
  ) +
  ggtitle("Distribuição regional de discentes")

data <-
  as.data.frame(table(c(discentes$UF[discentes$UF == "RJ"], rep(
    "Outras UF", length(discentes$UF[discentes$UF != "RJ"])
  ))))
colnames(data) <- c("Regiões", "N")

p2 <- ggplot(data, aes(x = "", y = N, fill = Regiões)) +
  scale_fill_manual(values = c("darkblue", "lightblue")) +
  geom_bar(stat = "identity") +
  coord_polar("y", start = 0) +
  theme_void() +
  theme(
    legend.position = 'bottom',
    legend.title = element_blank(),
    legend.text = element_text(colour = "white")
  ) +
  theme(
    plot.margin = unit(c(0, 0, 0, 0), "cm"),
    panel.background = element_rect(fill = '#2C3E50', colour = '#2C3E50'),
    plot.background = element_rect(fill = '#2C3E50', colour = '#2C3E50')
  )

data <- as.data.frame(table(discentes$Curso))
colnames(data) <- c("Cursos", "N")

p3 <- ggplot(data, aes(x = "", y = N, fill = Cursos)) +
  scale_fill_manual(values = c("darkblue", "lightblue")) +
  geom_bar(stat = "identity") +
  coord_polar("y", start = 0) +
  theme_void() +
  theme(
    legend.position = 'bottom',
    legend.title = element_blank(),
    legend.text = element_text(colour = "white")
  ) +
  theme(
    plot.margin = unit(c(0, 0, 0, 0), "cm"),
    panel.background = element_rect(fill = '#2C3E50', colour = '#2C3E50'),
    plot.background = element_rect(fill = '#2C3E50', colour = '#2C3E50')
  )

g <-
  arrangeGrob(p1,
              p2,
              p3,
              layout_matrix = rbind(c(1, 2), c(1, 3)),
              widths = c(7 / 10, 3 / 10))

g2 <- ggdraw(g) +
  theme(plot.background = element_rect(fill = "#2C3E50", color = NA))

plot(g2)

# plot 4 (geospatial plot of egressos)
states$egressos <- rep(NA, dim(states)[1])
UF <- as.data.frame(table(egressos$UF))
for (i in 1:length(UF$Var1)) {
  states$egressos[states$abbrev_state == UF$Var1[i]] <- UF$Freq[i]
}

p1 <- ggplot() +
  geom_sf(data = states, aes(fill = egressos), color = "grey") +
  scale_fill_distiller(
    palette = "Spectral",
    name = "Egressos, n",
    limits = c(min(0, UF$Freq), max(UF$Freq)),
    na.value = "grey"
  ) +
  theme_minimal() +
  theme(
    legend.position = 'bottom',
    legend.title = element_text(colour = "white"),
    legend.text = element_text(colour = "white")
  ) +
  theme(
    plot.margin = unit(c(0, 0, 0, 0), "cm"),
    panel.background = element_rect(fill = '#2C3E50', colour = '#2C3E50'),
    plot.background = element_rect(fill = '#2C3E50', colour = '#2C3E50'),
    panel.grid.major = element_line(colour = "transparent"),
    axis.text.x = element_blank(),
    axis.text.y = element_blank(),
    plot.title = element_text(size = 20, color = "white", face = "bold")
  ) +
  ggtitle("Distribuição regional de egressos")

data <-
  as.data.frame(table(c(egressos$UF[egressos$UF == "RJ"], rep(
    "Outras UF", length(egressos$UF[egressos$UF != "RJ"])
  ))))
colnames(data) <- c("Regiões", "N")

p2 <- ggplot(data, aes(x = "", y = N, fill = Regiões)) +
  scale_fill_manual(values = c("darkblue", "lightblue")) +
  geom_bar(stat = "identity") +
  coord_polar("y", start = 0) +
  theme_void() +
  theme(
    legend.position = 'bottom',
    legend.title = element_blank(),
    legend.text = element_text(colour = "white")
  ) +
  theme(
    plot.margin = unit(c(0, 0, 0, 0), "cm"),
    panel.background = element_rect(fill = '#2C3E50', colour = '#2C3E50'),
    plot.background = element_rect(fill = '#2C3E50', colour = '#2C3E50')
  )

data <- as.data.frame(table(egressos$Curso))
colnames(data) <- c("Cursos", "N")

p3 <- ggplot(data, aes(x = "", y = N, fill = Cursos)) +
  scale_fill_manual(values = c("darkblue", "lightblue")) +
  geom_bar(stat = "identity") +
  coord_polar("y", start = 0) +
  theme_void() +
  theme(
    legend.position = 'bottom',
    legend.title = element_blank(),
    legend.text = element_text(colour = "white")
  ) +
  theme(
    plot.margin = unit(c(0, 0, 0, 0), "cm"),
    panel.background = element_rect(fill = '#2C3E50', colour = '#2C3E50'),
    plot.background = element_rect(fill = '#2C3E50', colour = '#2C3E50')
  )

g <-
  arrangeGrob(p1,
              p2,
              p3,
              layout_matrix = rbind(c(1, 2), c(1, 3)),
              widths = c(7 / 10, 3 / 10))

g2 <- ggdraw(g) +
  theme(plot.background = element_rect(fill = "#2C3E50", color = NA))

plot(g2)

# plot 5 (summary table in plot)

# calculate summary statistics for pessoal
summ.table.pessoal <-
  cbind(
    sum(table.1),
    formatC(
      sum(table.1[2, ], na.rm = TRUE),
      format = "d",
      digits = 0,
      big.mark = "."
    ),
    formatC(
      sum(table.1[1, ], na.rm = TRUE),
      format = "d",
      digits = 0,
      big.mark = "."
    ),
    formatC(
      median(
        table.2.msc$as.numeric.mestres..Tempo.de.Curso..meses...,
        na.rm = TRUE
      ),
      format = "d",
      digits = 0,
      big.mark = "."
    ),
    formatC(
      median(
        table.2.dsc$as.numeric.doutores..Tempo.de.Curso..meses...,
        na.rm = TRUE
      ),
      format = "d",
      digits = 0,
      big.mark = "."
    ),
    dim(discentes)[1],
    sum(discentes$Curso == "Mestrado"),
    sum(discentes$Curso == "Doutorado")
  )

names(summ.table.pessoal) <-
  c(
    "Egressos",
    "Mestres",
    "Doutores",
    "Meses",
    "Meses",
    "Candidatos",
    "Mestrandos",
    "Doutorandos"
  )

# plot area setup
layout.m <- matrix(c(1, 2, 3, 1, 4, 5, 6, 7, 8),
                   ncol = 3,
                   byrow = TRUE)
source("Scripts/plot-margins.R")

summ.data <- summ.table.pessoal
source("Scripts/plot-summaries.R")
```

```{r sintese-pessoal-carousel, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "asis", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# carousel
bs_carousel(id = "pessoal-carousel",
            use_indicators = FALSE,
            use_controls = TRUE) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-pessoal-1.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-pessoal-2.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-pessoal-3.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-pessoal-4.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-pessoal-5.png"))
```

*Fontes:* **UNISUAM**

<br>

<br>

```{r sintese-rede, include = FALSE, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "hide", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# projetos
sheet <- "Projetos - Membros"
source("Scripts/read-xls-sucupira.R")

# create edge matrix
proj.id <-
  as.factor(sucupira.raw$`Identificador do Projeto de Pesquisa`)
n.proj <- nlevels(proj.id)
membros <- sort(unique(sucupira.raw$`Nome do Membro do Projeto`))
n.membros <- length(membros)
categ <- as.factor(sucupira.raw$`Categoria do Membro do Projeto`)
n.categ <- nlevels(categ)
edge.matrix <- matrix(NA, nrow = 0, ncol = 2)
colnames(edge.matrix) <- c("from", "to")

# loop across all projects to populate the edge matrix
for (i in 1:n.proj) {
  # get the members by project id
  membros.proj <-
    unique(sucupira.raw$`Nome do Membro do Projeto`[proj.id == levels(proj.id)[i]])
  # only vote for upper diagonal elements
  for (n in 1:length(membros.proj)) {
    for (m in n:length(membros.proj)) {
      if (n != m) {
        # find members
        row.n <- match(membros.proj[n], membros)
        col.m <- match(membros.proj[m], membros)
        new.edge <- cbind(membros[row.n], membros[col.m])
        # add edges
        edge.matrix <- rbind(edge.matrix, new.edge)
      }
    }
  }
}

# build the graph object
network <- graph_from_edgelist(edge.matrix, directed = FALSE)

# set member category and color
colrs <- brewer.pal(n = n.categ, name = "Set3")
for (i in 1:length(V(network))) {
  categ.id <-
    match(V(network)[[i]]$name, sucupira.raw$`Nome do Membro do Projeto`)
  V(network)[[i]]$categ <-
    sucupira.raw$`Categoria do Membro do Projeto`[categ.id]
  col.id <- match(V(network)[[i]]$categ, levels(categ))
  V(network)[i]$color <- colrs[col.id]
}

# plot area setup
layout.m <- c(1)
source("Scripts/plot-margins.R")

# plot 1
plot(
  network,
  directed = FALSE,
  arrow.mode = 0,
  vertex.label = NA,
  vertex.frame.color = "darkgrey",
  vertex.size = log(degree(network, mode = "all")) * 1.2,
  edge.color = "lightgrey",
  edge.lty = "solid",
  edge.size = edge.betweenness(network),
  edge.curved = .2
)
legend(
  "bottomleft",
  legend = levels(categ),
  pch = 19,
  col = colrs,
  text.col = "white",
  bty = "n",
  horiz = FALSE,
  cex = 0.8
)
title(main = "Membros de projetos de pesquisa",
      outer = TRUE,
      cex.main = 1.7)

# file path to save the wordclouds
dir.path <- file.path(getwd(), "index_files", "figure-html")
dir.create(dir.path, recursive = TRUE)

# IES participantes externos
sheet <- "Participante Externo"
source("Scripts/read-xls-sucupira.R")
sucupira.raw <- sucupira.raw[!duplicated(sucupira.raw), ]
IES <- sucupira.raw$`Instituição de Origem`
IES <- IES[!is.na(IES)]
países <- na.omit(sucupira.raw$`País da Instituição de Origem`)
mundo <-
  na.omit(sucupira.raw$`País da Instituição de Origem`[sucupira.raw$`País da Instituição de Origem` != "Brasil"])

part.ext.nac <-
  na.omit(sucupira.raw$`Nome do Participante`[sucupira.raw$`País da Instituição de Origem` == "Brasil"])
part.ext.inter <-
  na.omit(sucupira.raw$`Nome do Participante`[sucupira.raw$`País da Instituição de Origem` != "Brasil"])

IES.nac <-
  na.omit(sucupira.raw$`Instituição de Origem`[sucupira.raw$`País da Instituição de Origem` == "Brasil"])
IES.inter <-
  na.omit(sucupira.raw$`Instituição de Origem`[sucupira.raw$`País da Instituição de Origem` != "Brasil"])

# get initials
siglas <- c()
for (i in 1:length(IES)) {
  IES.abbr <-
    paste0(substr(strsplit(
      gsub('\\b\\w{1,2}\\b', '', IES[i]), split = " "
    )[[1]], 1, 1), collapse = "")
  siglas <- c(siglas, IES.abbr)
}
ranked.ies <- c()
rank <- 1
for (i in 1:length(sort(table(siglas), decreasing = FALSE))) {
  ranked.ies <-
    c(ranked.ies,
      rep(names(sort(table(
        siglas
      ))[i]), match(sort(table(
        siglas
      ))[i][[1]], unique(sort(
        table(siglas)
      )))))
}
data.to.cloud <- ranked.ies
cloud.title <- "Instituições"
source("Scripts/docs-to-wordcloud.R")

# plot 3

# plot area setup
layout.m <- c(1)
source("Scripts/plot-margins.R")

# plot area setup
par(mar = c(1.5, 15, 1, 1))

top <- min(length(na.omit(unique(IES.nac))), 10)
data.nac <-
  na.omit(data.frame(name = names(sort(
    table(IES.nac), decreasing = TRUE
  )[1:top]),
  value = as.numeric(sort(
    table(IES.nac), decreasing = TRUE
  )[1:top])))

# break vector names in 2 lines
text.2.break <- data.nac$name
source("Scripts/line-2-break.R")
data.nac$name <- broken_text

barplot(
  height = rev(data.nac$value),
  names = rev(data.nac$name),
  xlab = "N",
  col = rep(brewer.pal(n = 9, name = "Set3")[1], length(1:top)),
  horiz = T,
  las = 1,
  cex.names = 0.7
)
title(
  main = paste0("Top-", top, " nacionais"),
  outer = TRUE,
  cex.main = 1.7
)

# plot 4

# plot area setup
layout.m <- c(1)
source("Scripts/plot-margins.R")

# plot area setup
par(mar = c(1.5, 15, 1, 1))

top <- min(length(na.omit(unique(IES.inter))), 10)
data.inter <-
  na.omit(data.frame(name = names(sort(
    table(IES.inter), decreasing = TRUE
  )[1:top]),
  value = as.numeric(sort(
    table(IES.inter), decreasing = TRUE
  )[1:top])))

# break vector names in 2 lines
text.2.break <- data.inter$name
source("Scripts/line-2-break.R")
data.inter$name <- broken_text

barplot(
  height = rev(data.inter$value),
  names = rev(data.inter$name),
  xlab = "N",
  col = rep(brewer.pal(n = 9, name = "Set3")[1], length(1:top)),
  horiz = T,
  las = 1,
  cex.names = 0.7
)
title(
  main = paste0("Top-", top, " internacionais"),
  outer = TRUE,
  cex.main = 1.7
)

# plot 5

# plot area setup
layout.m <- c(1)
source("Scripts/plot-margins.R")

# plot area setup
par(mar = c(1.5, 15, 1, 1))

top <- min(length(na.omit(unique(mundo))), 10)
data.pais <-
  na.omit(data.frame(name = names(sort(
    table(mundo), decreasing = TRUE
  )[1:top]),
  value = as.numeric(sort(
    table(mundo), decreasing = TRUE
  )[1:top])))

# break vector names in 2 lines
text.2.break <- data.pais$name
source("Scripts/line-2-break.R")
data.pais$name <- broken_text

barplot(
  height = rev(data.pais$value),
  names = rev(data.pais$name),
  xlab = "N",
  col = rep(brewer.pal(n = 9, name = "Set3")[1], length(1:top)),
  horiz = T,
  las = 1,
  cex.names = 0.7
)
title(
  main = paste0("Top-", top, " países"),
  outer = TRUE,
  cex.main = 1.7
)

# plot 6 (summary table in plot)

# calculate summary statistics for IES
summ.table.ies <-
  cbind(
    length(unique(na.omit(IES.nac))) + length(unique(na.omit(IES.inter))),
    length(unique(na.omit(IES.nac))),
    length(unique(na.omit(IES.inter))),
    length(unique(na.omit(part.ext.nac))) + length(unique(na.omit(part.ext.inter))),
    length(unique(na.omit(part.ext.nac))),
    length(unique(na.omit(part.ext.inter)))
  )

names(summ.table.ies) <-
  c(
    "Instituições colaboradoras",
    "Nacionais",
    "Internacionais",
    "Participantes externos",
    "Nacionais",
    "Internacionais"
  )

# plot area setup
layout.m <- matrix(c(1, 1, 2, 3, 4, 4, 5, 6),
                   ncol = 2,
                   byrow = TRUE)
source("Scripts/plot-margins.R")

summ.data <- summ.table.ies
source("Scripts/plot-summaries.R")
```

```{r sintese-rede-carousel, echo = FALSE, warning = FALSE, message = FALSE, fig.align = 'center', results = "asis", out.width = "100%"}
options(knitr.kable.NA = '--', knitr.table.format = "html")

# carousel
bs_carousel(id = "rede-carousel",
            use_indicators = FALSE,
            use_controls = TRUE) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-rede-1.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/Participante Externo.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-rede-2.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-rede-3.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-rede-4.png")) %>%
  bs_append(content = bs_carousel_image(src = "index_files/figure-html/sintese-rede-5.png"))
```

*Fontes:* [**Plataforma Sucupira**](https://sucupira.capes.gov.br/sucupira/)

<br>
